@import url('https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
@custom-variant dark (&:is(.dark *));

/* ======================== TOKENS / THEME ======================== */
:root {
--font-sans: 'Nunito', system-ui, sans-serif;
--font-mono: 'Roboto Mono', 'Courier New', monospace;
/* Base / Brand */
--white: #ffffff;
--black: #004a4a;
--brand-primary: #66a9aa;
--brand-secondary: #21293d; /* Alterado */
--brand-accent: #97c0c2;
/* Gray scale / teals */
--gray-20: #fafbfb;
--gray-50: #f8f9f9;
--gray-100: #f0f0f0;
--gray-200: #e8ecec;
--gray-300: #d1d5d5;
--gray-400: #97c0c2;
--gray-500: #7b9d9f;
--gray-600: #21293d; /* Alterado */
--gray-700: #21293d; /* Alterado */
--gray-800: #202836; /* Alterado */
--gray-850: #0f2626;
--gray-900: #202836; /* Alterado */
--green-50: #f0f8f8;
--green-100: #d4efef;
--green-200: #a9dfdf;
--green-300: #7ecfcf;
--green-400: #53bfbf;
--green-500: #66a9aa;
--green-600: #4d8e8f;
--green-700: #347374;
--green-800: #1b5859;
--green-900: #003d3e;
--red-50: #fef2f2;
--red-100: #fee2e2;
--red-200: #fecaca;
--red-300: #fca5a5;
--red-400: #f87171;
--red-500: #ef4444;
--red-600: #dc2626;
--amber-50: #fffbeb;
--amber-100: #fef3c7;
--amber-500: #ff8c00;
--amber-600: #d97706;
/* Semantic (LIGHT) */
--background: #ffffff;
--foreground: #004a4a;
--card: #ffffff;
--card-foreground: #004a4a;
--popover: #ffffff;
--popover-foreground: #004a4a;
--primary: #66a9aa;
--primary-foreground: #ffffff;
--primary-hover: #004a4a;
--secondary: #fafbfb;
--secondary-foreground: #004a4a;
--muted: #fafbfb;
--muted-foreground: #21293d; /* Alterado */
--accent: #f0f8f8;
--accent-foreground: #66a9aa;
--destructive: #ef4444;
--destructive-foreground: #ffffff;
--warning: #ff8c00;
--warning-foreground: #ffffff;
/* Surfaces (LIGHT) */
--surface-primary: #ffffff;
--surface-secondary: #fafbfb;
--surface-tertiary: #f0f0f0;
--surface-hover: #f0f0f0;
--surface-active: #e8ecec;
--surface-chat: #ffffff;
--surface-dialog: #ffffff;
--surface-submit: #347374;
--surface-submit-hover: #1b5859;
/* Text / borders / inputs */
--text-primary: #004a4a;
--text-secondary: #21293d; /* Alterado */
--text-tertiary: #7b9d9f;
--text-warning: #ff8c00;
--placeholder: #97c0c2;
--border: #f0f0f0;
--border-light: #f0f0f0;
--border-medium: #e8ecec;
--border-heavy: #d1d5d5;
--border-xheavy: #97c0c2;
--input: transparent;
--input-background: #ffffff;
--switch-background: #f0f0f0;
/* Sidebar (LIGHT) */
--sidebar: #fafbfb;
--sidebar-foreground: #004a4a;
--sidebar-primary: #66a9aa;
--sidebar-primary-foreground: #ffffff;
--sidebar-accent: #f0f8f8;
--sidebar-accent-foreground: #004a4a;
--sidebar-border: #f0f0f0;
--sidebar-ring: #66a9aa;
/* Header / util */
--header-bg: var(--surface-secondary);
--header-fg: var(--text-primary);
--header-border: var(--border);
--surface-primary-alt: var(--surface-primary);
--surface-active-alt: var(--surface-active);
/* Hover glow */
--hover-accent: #008080;
/* Cor do sidebar esquerdo no LIGHT */
--light-leftpanel-bg: var(--surface-secondary);
}

.dark {
--background: #202836; /* Alterado */
--foreground: #f0f0f0;
--card: #0f2626;
--card-foreground: #f0f0f0;
--popover: #0f2626;
--popover-foreground: #f0f0f0;
--primary: #14b8a6;
--primary-foreground: #ffffff;
--primary-hover: #53bfbf;
--input: #2d3d4a;
--input-background: #2d3d4a;
--secondary: #202836;
--secondary-foreground: #f0f0f0;
--muted: #202836;
--muted-foreground: #d1d5d5;
--accent: #2d3d4a;
--accent-foreground: #f0f0f0;
--surface-primary: #202836; /* Alterado */
--surface-secondary: #202836;
--surface-tertiary: #2d3d4a;
--surface-hover: #2d3d4a;
--surface-active: #2d3d4a;
--surface-chat: #2d3d4a;
--surface-dialog: #2d3d4a;
--surface-active-alt: var(--surface-active);
--surface-primary-alt: var(--sidebar);
--border: #2d3d4a;
--border-light: #2d3d4a;
--border-medium: #2d3d4a;
--text-primary: #f0f0f0;
--text-secondary: #d1d5d5;
--text-tertiary: #7b9d9f;
--active-icon: #14b8a6;
--sidebar: #202836;
--sidebar-foreground: #f0f0f0;
--sidebar-accent: #2d3d4a;
--sidebar-border: #21293D; /* usando brand-secondary p/ contraste */
--sidebar-ring: #14b8a6;
--hover-accent: #008080;
--switch-unchecked: var(--border-medium);
}

/* === Tipografia responsiva — mobile-first, H1 contido (após tokens) === */
:root {
/* Base tipográfica */
--font-size: 14px;            /* aumente p/ 15/16 se quiser tudo maior */
--font-sans: 'Nunito', system-ui, sans-serif;

/* Pesos e alturas de linha */
--w-regular: 400;
--w-semibold: 600;
--w-bold: 700;
--w-extrabold: 800;
--lh-tight: 1.2;
--lh-normal: 1.45;

/* Escala de headings — MOBILE (≤1279px) */
--h1: 1.5rem;  /* ~21px @ base 14 */
--h2: 1.35rem; /* ~18.9px */
--h3: 1.2rem;  /* ~16.8px */
--h4: 1.1rem;  /* ~15.4px */
--h5: 1rem;    /* 14px */
--h6: 0.95rem; /* ~13.3px */

/* Margens dos títulos */
--h-mt: 0.8em;
--h-mb: 0.4em;
}

html { font-size: var(--font-size); }
body { font-family: var(--font-sans); line-height: var(--lh-normal); }

/* Headings de baixa especificidade (evita briga com o app) */
:where(h1,h2,h3,h4,h5,h6) {
font-family: var(--font-sans);
line-height: var(--lh-tight);
margin: var(--h-mt) 0 var(--h-mb);
letter-spacing: -0.01em;
color: inherit;
}

h1 { font-size: var(--h1); font-weight: var(--w-extrabold); }
h2 { font-size: var(--h2); font-weight: var(--w-bold); }
h3 { font-size: var(--h3); font-weight: var(--w-bold); }
h4 { font-size: var(--h4); font-weight: var(--w-semibold); }
h5 { font-size: var(--h5); font-weight: var(--w-semibold); }
h6 { font-size: var(--h6); font-weight: var(--w-regular); text-transform: uppercase; letter-spacing: 0.04em; }

/* Conteúdo do chat: manter tamanho base (override antigo removido) */
.prose { font-size: 1rem; }

/* Código no Artifacts Panel — evitar px/pt mix */
#artifacts-panel #artifacts-code pre,
#artifacts-panel #artifacts-code code,
#artifacts-panel [id*='content-code'] pre,
#artifacts-panel [id*='content-code'] code {
font-size: 0.95rem; /* ~13.3px @ base 14; use 1rem se preferir */
line-height: 1.5;
}

/* Upscale discreto */
@media (min-width: 768px) {
:root {
--h1: 1.6rem;
--h2: 1.45rem;
--h3: 1.25rem;
}
}
@media (min-width: 1280px) {
:root {
--h1: 1.7rem;
--h2: 1.55rem;
--h3: 1.3rem;
--h4: 1.15rem;
}
}

/* Utilitários opcionais */
.text-scale-110 {
--h1: calc(var(--h1) * 1.10);
--h2: calc(var(--h2) * 1.10);
--h3: calc(var(--h3) * 1.10);
--h4: calc(var(--h4) * 1.10);
--h5: calc(var(--h5) * 1.10);
--h6: calc(var(--h6) * 1.10);
}
.text-scale-90 {
--h1: calc(var(--h1) * 0.90);
--h2: calc(var(--h2) * 0.90);
--h3: calc(var(--h3) * 0.90);
--h4: calc(var(--h4) * 0.90);
--h5: calc(var(--h5) * 0.90);
--h6: calc(var(--h6) * 0.90);
}

/* ============================== BASE ============================== */
body { background: var(--background); color: var(--foreground); }
*, ::before, ::after {
border-color: var(--border);
outline-color: color-mix(in oklab, var(--ring, var(--primary)) 50%, transparent);
}

/* ============================== HEADER / STICKY ELEMENTS ============================== */
.dark .sticky.top-0, .dark .sticky.-top-1 { background-color: var(--background) !important; }

/* ============================== LAYOUT E BORDAS DOS PAINÉIS ============================== */
.dark [data-testid='nav'] { border-right: 1px solid var(--sidebar-border) !important; }

/* ============================== BOTÕES ============================== */
.btn {
align-items: center; border-radius: 0.5rem; border-width: 1px; border-style: solid;
cursor: pointer; display: inline-flex; font-weight: 500; line-height: 1.25rem;
padding: 0.5rem 0.75rem; transition: all 0.12s ease-in-out; border-color: transparent;
}
.btn-primary { background: var(--primary); color: var(--primary-foreground); }
.btn-primary:hover { background: var(--primary-hover); }
.btn-secondary { background: var(--secondary); color: var(--secondary-foreground); border-color: var(--border); }
.btn-secondary:hover { background: var(--surface-hover); }
.btn-neutral { background: var(--surface-secondary); color: var(--text-primary); border-color: var(--border); }
.btn-neutral:hover { background: var(--surface-hover); }

/* ============================== BOTÕES COM ÍCONES (SVG) ============================== */
button:has(svg):hover, [role='button']:has(svg):hover, [role='tab']:has(svg):hover {
border-style: solid; border-color: var(--hover-accent) !important; color: var(--hover-accent) !important;
}
button:has(svg):focus-visible, [role='button']:has(svg):focus-visible, [role='tab']:has(svg):focus-visible {
border-style: solid; border-color: var(--hover-accent) !important;
box-shadow: 0 0 0 2px color-mix(in oklab, var(--hover-accent) 25%, transparent) !important;
color: var(--hover-accent) !important;
}
button:hover [fill='currentColor'], [role='button']:hover [fill='currentColor'] { fill: var(--hover-accent) !important; }
#controls-nav button:hover { border-style: solid; border-color: var(--hover-accent) !important; color: var(--hover-accent) !important; }
#controls-nav button:focus-visible {
border-style: solid; border-color: var(--hover-accent) !important;
box-shadow: 0 0 0 2px color-mix(in oklab, var(--hover-accent) 25%, transparent) !important;
color: var(--hover-accent) !important;
}

/* ============================== FORM / INPUT ============================== */
.form-input, .form-textarea, .form-select {
appearance: none; background: var(--input-background); border: 1px solid var(--border);
border-radius: 0.5rem; line-height: 1.5rem; padding: 0.5rem 0.75rem; transition: all 0.1s ease-in-out;
}
.form-input:focus, .form-textarea:focus, .form-select:focus {
border-color: var(--ring, var(--primary)); box-shadow: 0 0 0 2px var(--ring, var(--primary)); outline: none;
}
.form-input:hover, .form-textarea:hover, .form-select:hover,
input[type='text']:hover, input[type='email']:hover, input[type='search']:hover,
textarea:hover, select:hover {
border-color: var(--hover-accent) !important;
box-shadow: 0 0 0 2px color-mix(in oklab, var(--hover-accent) 25%, transparent) !important;
}
#prompt-textarea:hover { border-color: inherit !important; box-shadow: none !important; }
.dark input[type='text'], .dark input[type='email'], .dark input[type='password'],
.dark input[type='search'], .dark textarea {
background-color: var(--input-background) !important; border-color: var(--border-medium) !important;
}

/* ============================== SWITCHES (ON/OFF) ============================== */
[role="switch"] {
border: 1px solid var(--border-medium) !important;
transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out !important;
}

/* ============================== SIDEBAR ESQUERDO (GERAL) ============================== */
.dark #chat-history-nav, .dark [data-testid='nav'] > div > div { background-color: var(--sidebar) !important; }
:root:not(.dark) #chat-history-nav, :root:not(.dark) [data-testid='nav'] > div > div { background-color: var(--light-leftpanel-bg) !important; }
.dark #chat-history-nav .from-surface-primary-alt {
--tw-gradient-from: var(--sidebar) !important;
background-image: linear-gradient(to left, var(--sidebar), transparent) !important;
}
:root:not(.dark) #chat-history-nav .bg-gradient-to-l.from-surface-primary-alt {
--tw-gradient-from: var(--light-leftpanel-bg) !important;
background-image: linear-gradient(to left, var(--light-leftpanel-bg), transparent) !important;
}
[data-testid='convo-item'][aria-current='page'], [data-testid='convo-item'].bg-surface-active-alt {
background-color: var(--surface-active) !important; color: var(--text-primary) !important;
}
[data-testid='convo-item'][aria-current='page'] svg { color: var(--text-primary) !important; stroke: currentColor !important; }
:root:not(.dark) #chat-history-nav [data-testid='convo-item']:hover { background-color: var(--surface-active-alt) !important; }

/* ============================== NAV-USER ============================== */
:root:not(.dark) [data-testid='nav-user'], :root:not(.dark) [data-testid='nav-user'] * { background-color: var(--light-leftpanel-bg) !important; }
.dark [data-testid='nav-user'], .dark [data-testid='nav-user'] * { background-color: var(--sidebar) !important; }
[data-testid='nav-user'], [data-testid='nav-user'] * {
border: none !important; outline: none !important; box-shadow: none !important; text-decoration: none !important;
}
[data-testid='nav-user'] { min-height: 60px; }
[data-testid='nav-user']:hover, [data-testid='nav-user']:focus, [data-testid='nav-user']:focus-visible {
border: none !important; outline: none !important; box-shadow: none !important;
}
:root:not(.dark) [data-testid='nav-user'] .text-text-primary { color: var(--text-primary) !important; }
.dark [data-testid='nav-user'] .text-text-primary { color: var(--sidebar-foreground) !important; }
nav [role='button'][data-testid='nav-user']:hover { border-color: transparent !important; }

/* ============================== DIALOGS (GERAL) ============================== */
:root:not(.dark) [id^='headlessui-dialog-panel-'][data-headlessui-state='open'],
:root:not(.dark) [role='dialog'][data-state='open'],
:root:not(.dark) [role='dialog'][data-open] {
background-color: var(--background) !important; color: var(--text-primary) !important;
border: 1px solid var(--border) !important; box-shadow: var(--shadow-xl) !important;
}
.dark [id^='headlessui-dialog-panel-'][data-headlessui-state='open'],
.dark [role='dialog'][data-state='open'],
.dark [role='dialog'][data-open] { background-color: var(--background) !important; }
.dark [id^='headlessui-dialog-panel-'][data-headlessui-state='open'] .sticky,
.dark [role='dialog'][data-state='open'] .sticky,
.dark [role='dialog'][data-open] .sticky { background-color: var(--background) !important; }

/* ============================== DIALOG DE CONFIGURAÇÕES ============================== */
:root:not(.dark) [role='dialog']:has([aria-label='Settings']) { background-color: var(--surface-primary) !important; }
:root:not(.dark) [role='dialog']:has([aria-label='Settings']) [role='tab'][data-state='active'] { background-color: var(--surface-tertiary) !important; }
.dark [role='dialog']:has([aria-label='Settings']) [role='tab'][data-state='active'] { background-color: var(--surface-active) !important; }
.dark [role='dialog']:has([aria-label='Settings']) [role='tab']:hover { background-color: var(--surface-hover) !important; }

/* ============================== PAINEL DE EDIÇÃO DE AGENTE ============================== */
div.h-auto:has(label[for="instructions"]) { background-color: var(--light-leftpanel-bg) !important; }
.dark div.h-auto:has(label[for="instructions"]) { background-color: var(--sidebar) !important; }

/* ============================== PAINEL DE CONTROLES (DIREITA) ============================== */
:root:not(.dark) #controls-nav { background-color: var(--light-leftpanel-bg) !important; }
.dark #controls-nav { background-color: var(--sidebar) !important; }

/* ============================== ARTIFACTS PANEL ============================== */
#artifacts-panel > div > .flex.flex-col { border: none !important; box-shadow: none !important; border-radius: 0 !important; }
#artifacts-panel .bg-surface-primary-alt { background-color: var(--surface-primary) !important; }
.dark #artifacts-panel .bg-surface-primary-alt { background-color: var(--sidebar) !important; }
#artifacts-panel .border-b.border-border-medium, #artifacts-panel .border-t.border-border-medium { border: none !important; }
#artifacts-panel [role='tabpanel'][id*='content-preview'] { background-color: var(--surface-secondary) !important; }
#artifacts-panel .flex.items-center.justify-between > .flex.items-center:first-child { flex-shrink: 1; min-width: 0; }
#artifacts-panel h3.truncate { max-width: 100%; }
[data-panel-resize-handle-id][data-panel-group-direction='horizontal'] { background-color: var(--border-light) !important; width: 1px !important; }
[data-panel-resize-handle-id][data-panel-group-direction='horizontal'] > div { display: none !important; }
#artifacts-panel #artifacts-code, #artifacts-panel [id*='content-code'] {
background-color: var(--code-background, #0d1117) !important; padding: 1rem !important; overflow: auto; flex-grow: 1;
}
#artifacts-panel #artifacts-code pre,
#artifacts-panel #artifacts-code code,
#artifacts-panel [id*='content-code'] pre,
#artifacts-panel [id*='content-code'] code {
background-color: transparent !important; color: var(--code-text, #f3f9fa) !important; font-family: var(--font-mono) !important; white-space: pre !important;
}
#artifacts-panel #artifacts-code .hljs-comment, #artifacts-panel [id*='content-code'] .hljs-comment { color: var(--code-comment, #97c0c2); }
#artifacts-panel #artifacts-code .hljs-keyword, #artifacts-panel [id*='content-code'] .hljs-keyword { color: var(--code-keyword, #14b8a6); }
#artifacts-panel #artifacts-code .hljs-string, #artifacts-panel [id*='content-code'] .hljs-string { color: var(--code-string, #2e8b47); }

/* ============================== PERSONALIZAÇÕES FINAIS INTEGRADAS ============================== */
/* Correção da animação do seletor de modelo */
div[class*="translate-x-[-100px]"] { margin-left: 0.5rem !important; }

/* Campo de busca transparente */
[data-testid='nav'] input[aria-label="Buscar mensagens"],
[data-testid='nav'] input[aria-label="Buscar mensagens"]:hover,
[data-testid='nav'] input[aria-label="Buscar mensagens"]:focus,
[data-testid='nav'] input[aria-label="Buscar mensagens"]:focus-visible {
background: transparent !important;
background-color: transparent !important;
border: none !important;
box-shadow: none !important;
outline: none !important;
}

/* Altura do nome de usuário */
[data-testid='nav-user'] .overflow-hidden.text-ellipsis.whitespace-nowrap { padding-top: 2px; padding-bottom: 2px; }

/* Ícones do painel direito */
#controls-nav button svg { color: var(--text-primary) !important; }

/* Hover no chat ativo */
[data-testid='convo-item'][aria-current='page']:hover { background-color: var(--surface-active) !important; }

/* Estilo unificado dos botões de ação */
div[class*="group-[[data-collapsed=true]]"] > button,
button[data-testid="bookmark-menu"] {
background-color: transparent !important;
border: 1px solid var(--border-light) !important;
border-radius: 9999px !important;
}
@media (min-width: 768px) {
div[class*="group-[[data-collapsed=true]]"] > button,
button[data-testid="bookmark-menu"] {
border-radius: 0.75rem !important;
}
}

/* Melhoria de contraste (Slider e Switch) */
.dark div:has(> span[role="slider"]) { background-color: var(--surface-tertiary) !important; }
span[role="slider"] { background-color: var(--primary) !important; border-color: var(--background) !important; }
/* Estado LIGADO */
button[role="switch"][data-state="checked"] { background-color: var(--surface-tertiary) !important; border-color: transparent !important; }
button[role="switch"][data-state="checked"] > span { background-color: var(--primary) !important; }
/* Estado DESLIGADO */
button[role="switch"][data-state="unchecked"] { border: 1px solid var(--border-medium) !important; }
button[role="switch"][data-state="unchecked"] > span { background-color: var(--gray-400) !important; }

/* Feather icon swap */
.lucide.lucide-feather { background-repeat: no-repeat; background-size: contain; background-position: center; }
:root:not(.dark) .lucide.lucide-feather {
background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'%3e%3cpath fill='%23004a4a' d='M80 280C80 169.5 169.5 80 280 80C382.9 80 467.7 157.7 478.8 257.7C479 259.4 479.7 261 480.9 262.2L535.6 321.9C541.1 327.9 544.1 335.7 544.1 343.7C544.1 361.5 529.6 376 511.8 376L480 376C475.6 376 472 379.6 472 384L472 440C472 470.9 446.9 496 416 496L376 496C371.6 496 368 499.6 368 504L368 568C368 572.4 371.6 576 376 576C380.4 576 384 572.4 384 568L384 512L416 512C455.8 512 488 479.8 488 440L488 392L511.7 392C538.4 392 560 370.4 560 343.7C560 331.6 555.5 320 547.3 311.1L494.4 253.4C481.2 146.6 390.2 64 280 64C160.7 64 64 160.7 64 280C64 347.7 95.2 408.2 144 447.8L144 568C144 572.4 147.6 576 152 576C156.4 576 160 572.4 160 568L160 444C160 441.5 158.9 439.2 156.9 437.7C110.1 401.1 80 344.1 80 280zM307.3 159.9C309.1 159.9 310.5 161.3 310.5 163.1L310.5 168C310.5 182.4 319.2 193.8 329.7 199.9C340.2 206 354.5 207.7 366.9 200.6L370.9 198.3C372.4 197.4 374.4 198 375.3 199.5L393.2 231.7C394 233.2 393.5 235.1 392.1 236L388.3 238.3C376.3 245.8 371 259 371.2 271L371.2 271.9L371.2 272.8C371.1 284.8 376.3 298 388.4 305.5L392.1 307.8C393.5 308.7 394 310.6 393.2 312.1L375.3 344.4C374.4 346 372.5 346.5 370.9 345.6L366.9 343.3C354.5 336.1 340.2 337.9 329.7 344C319.3 350.1 310.5 361.5 310.5 375.9L310.5 380.8C310.5 382.6 309.1 384 307.3 384L268.9 384C267.1 384 265.7 382.6 265.7 380.8L265.7 376.1C265.7 361.7 256.9 350.2 246.4 344.1C235.8 338 221.6 336.3 209.1 343.5L205.3 345.7C203.8 346.6 201.8 346 200.9 344.5L182.9 312.2C182.1 310.7 182.6 308.8 184 307.9L187.5 305.7C199.6 298.2 204.9 285 204.7 273L204.7 272.1L204.7 271.1C204.8 259.1 199.6 245.9 187.5 238.4L183.9 236.1C182.4 235.2 182 233.3 182.8 231.8L200.8 199.6C201.7 198 203.6 197.5 205.2 198.4L209 200.6C221.4 207.8 235.7 206.1 246.3 199.9C256.8 193.8 265.6 182.3 265.6 167.9L265.6 163.2C265.6 161.4 267 160 268.8 160L307.2 160zM268.9 143.9C258.3 143.9 249.7 152.5 249.7 163.1L249.7 167.8C249.7 175.4 245 182.1 238.4 186C231.8 189.9 223.7 190.4 217.1 186.6L213.3 184.4C204 179 192.2 182.3 186.9 191.7L168.9 223.9C163.9 232.8 166.8 244.1 175.5 249.6L179.1 251.9C185.5 255.9 188.8 263.3 188.7 270.9L188.7 272.1L188.7 273.2C188.8 280.8 185.5 288.2 179 292.2L175.5 294.4C166.8 299.8 163.9 311.1 168.9 320.1L186.9 352.4C192.1 361.8 204 365 213.3 359.7L217.1 357.5C223.7 353.7 231.8 354.3 238.4 358.1C245 361.9 249.7 368.6 249.7 376.3L249.7 381C249.7 391.6 258.3 400.2 268.9 400.2L307.3 400.2C317.9 400.2 326.5 391.6 326.5 381L326.5 376.1C326.5 368.5 331.1 361.9 337.7 358.1C344.3 354.3 352.3 353.6 358.9 357.4L362.9 359.7C372.2 365.1 384.1 361.8 389.3 352.4L407.2 320.1C412.2 311.2 409.2 299.9 400.6 294.5L396.9 292.2C390.5 288.2 387.2 280.8 387.3 273.3L387.3 272.3L387.3 271.2C387.2 263.7 390.5 256.3 396.9 252.3L400.7 250C409.4 244.6 412.3 233.3 407.3 224.4L389.4 192.2C384.2 182.8 372.3 179.5 363 184.9L359 187.2C352.4 191 344.4 190.3 337.8 186.5C331.3 182.7 326.6 176 326.6 168.5L326.6 163.6C326.6 153 318 144.4 307.4 144.4L269 144.4zM288 295.8C274.7 295.8 264 285.1 264 271.8C264 258.5 274.7 247.8 288 247.8C301.3 247.8 312 258.5 312 271.8C312 285.1 301.3 295.8 288 295.8zM248 271.8C248 293.9 265.9 311.8 288 311.8C310.1 311.8 328 293.9 328 271.8C328 249.7 310.1 231.8 288 231.8C265.9 231.8 248 249.7 248 271.8z'/%3e%3c/svg%3e");
}
.dark .lucide.lucide-feather {
background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'%3e%3cpath fill='%23FFFFFF' d='M80 280C80 169.5 169.5 80 280 80C382.9 80 467.7 157.7 478.8 257.7C479 259.4 479.7 261 480.9 262.2L535.6 321.9C541.1 327.9 544.1 335.7 544.1 343.7C544.1 361.5 529.6 376 511.8 376L480 376C475.6 376 472 379.6 472 384L472 440C472 470.9 446.9 496 416 496L376 496C371.6 496 368 499.6 368 504L368 568C368 572.4 371.6 576 376 576C380.4 576 384 572.4 384 568L384 512L416 512C455.8 512 488 479.8 488 440L488 392L511.7 392C538.4 392 560 370.4 560 343.7C560 331.6 555.5 320 547.3 311.1L494.4 253.4C481.2 146.6 390.2 64 280 64C160.7 64 64 160.7 64 280C64 347.7 95.2 408.2 144 447.8L144 568C144 572.4 147.6 576 152 576C156.4 576 160 572.4 160 568L160 444C160 441.5 158.9 439.2 156.9 437.7C110.1 401.1 80 344.1 80 280zM307.3 159.9C309.1 159.9 310.5 161.3 310.5 163.1L310.5 168C310.5 182.4 319.2 193.8 329.7 199.9C340.2 206 354.5 207.7 366.9 200.6L370.9 198.3C372.4 197.4 374.4 198 375.3 199.5L393.2 231.7C394 233.2 393.5 235.1 392.1 236L388.3 238.3C376.3 245.8 371 259 371.2 271L371.2 271.9L371.2 272.8C371.1 284.8 376.3 298 388.4 305.5L392.1 307.8C393.5 308.7 394 310.6 393.2 312.1L375.3 344.4C374.4 346 372.5 346.5 370.9 345.6L366.9 343.3C354.5 336.1 340.2 337.9 329.7 344C319.3 350.1 310.5 361.5 310.5 375.9L310.5 380.8C310.5 382.6 309.1 384 307.3 384L268.9 384C267.1 384 265.7 382.6 265.7 380.8L265.7 376.1C265.7 361.7 256.9 350.2 246.4 344.1C235.8 338 221.6 336.3 209.1 343.5L205.3 345.7C203.8 346.6 201.8 346 200.9 344.5L182.9 312.2C182.1 310.7 182.6 308.8 184 307.9L187.5 305.7C199.6 298.2 204.9 285 204.7 273L204.7 272.1L204.7 271.1C204.8 259.1 199.6 245.9 187.5 238.4L183.9 236.1C182.4 235.2 182 233.3 182.8 231.8L200.8 199.6C201.7 198 203.6 197.5 205.2 198.4L209 200.6C221.4 207.8 235.7 206.1 246.3 199.9C256.8 193.8 265.6 182.3 265.6 167.9L265.6 163.2C265.6 161.4 267 160 268.8 160L307.2 160zM268.9 143.9C258.3 143.9 249.7 152.5 249.7 163.1L249.7 167.8C249.7 175.4 245 182.1 238.4 186C231.8 189.9 223.7 190.4 217.1 186.6L213.3 184.4C204 179 192.2 182.3 186.9 191.7L168.9 223.9C163.9 232.8 166.8 244.1 175.5 249.6L179.1 251.9C185.5 255.9 188.8 263.3 188.7 270.9L188.7 272.1L188.7 273.2C188.8 280.8 185.5 288.2 179 292.2L175.5 294.4C166.8 299.8 163.9 311.1 168.9 320.1L186.9 352.4C192.1 361.8 204 365 213.3 359.7L217.1 357.5C223.7 353.7 231.8 354.3 238.4 358.1C245 361.9 249.7 368.6 249.7 376.3L249.7 381C249.7 391.6 258.3 400.2 268.9 400.2L307.3 400.2C317.9 400.2 326.5 391.6 326.5 381L326.5 376.1C326.5 368.5 331.1 361.9 337.7 358.1C344.3 354.3 352.3 353.6 358.9 357.4L362.9 359.7C372.2 365.1 384.1 361.8 389.3 352.4L407.2 320.1C412.2 311.2 409.2 299.9 400.6 294.5L396.9 292.2C390.5 288.2 387.2 280.8 387.3 273.3L387.3 272.3L387.3 271.2C387.2 263.7 390.5 256.3 396.9 252.3L400.7 250C409.4 244.6 412.3 233.3 407.3 224.4L389.4 192.2C384.2 182.8 372.3 179.5 363 184.9L359 187.2C352.4 191 344.4 190.3 337.8 186.5C331.3 182.7 326.6 176 326.6 168.5L326.6 163.6C326.6 153 318 144.4 307.4 144.4L269 144.4zM288 295.8C274.7 295.8 264 285.1 264 271.8C264 258.5 274.7 247.8 288 247.8C301.3 247.8 312 258.5 312 271.8C312 285.1 301.3 295.8 288 295.8zM248 271.8C248 293.9 265.9 311.8 288 311.8C310.1 311.8 328 293.9 328 271.8C328 249.7 310.1 231.8 288 231.8C265.9 231.8 248 249.7 248 271.8z'/%3e%3c/svg%3e");
}
/* Esconde os paths originais do ícone */
.lucide.lucide-feather path { visibility: hidden; }

/* === Scrollbar change (adicionado) === */
/* ============================== SCROLLBARS ============================== */

/* 1) DARK THEME: scrollbars globais, mesma cor do fundo e o mais finas possível, sem borda/sombra */
.dark, .dark * {
scrollbar-width: thin;                               /* Firefox: fino */
scrollbar-color: var(--background) var(--background);/* Thumb = Track = fundo */
}
.dark ::-webkit-scrollbar { width: 4px; height: 4px; }
.dark ::-webkit-scrollbar-track {
background: var(--background) !important;
border: none !important; box-shadow: none !important;
}
.dark ::-webkit-scrollbar-thumb {
background: var(--background) !important;            /* “some” na cor do fundo */
border: none !important; box-shadow: none !important;
}

/* 2a) LIGHT — Sidebar esquerdo: mesma cor do fundo do sidebar */
:root:not(.dark) #chat-history-nav,
:root:not(.dark) [data-testid='nav'] > div > div {
scrollbar-width: thin; /* Firefox */
scrollbar-color: var(--light-leftpanel-bg) var(--light-leftpanel-bg);
}
:root:not(.dark) #chat-history-nav::-webkit-scrollbar,
:root:not(.dark) [data-testid='nav'] > div > div::-webkit-scrollbar { width: 4px; height: 4px; }
:root:not(.dark) #chat-history-nav::-webkit-scrollbar-track,
:root:not(.dark) [data-testid='nav'] > div > div::-webkit-scrollbar-track {
background: var(--light-leftpanel-bg) !important; border: none !important; box-shadow: none !important;
}
:root:not(.dark) #chat-history-nav::-webkit-scrollbar-thumb,
:root:not(.dark) [data-testid='nav'] > div > div::-webkit-scrollbar-thumb {
background: var(--light-leftpanel-bg) !important; border: none !important; box-shadow: none !important;
}

/* 2b) LIGHT — Área de mensagens: scrollbar branca, mínima */
:root:not(.dark) [data-testid='chat'],
:root:not(.dark) [data-testid='chat-container'],
:root:not(.dark) [data-testid='chat-messages'],
:root:not(.dark) main [data-testid='messages'],
:root:not(.dark) main .overflow-y-auto {
scrollbar-width: thin;                /* Firefox */
scrollbar-color: #ffffff transparent; /* Thumb branco, track transparente */
}
:root:not(.dark) [data-testid='chat']::-webkit-scrollbar,
:root:not(.dark) [data-testid='chat-container']::-webkit-scrollbar,
:root:not(.dark) [data-testid='chat-messages']::-webkit-scrollbar,
:root:not(.dark) main [data-testid='messages']::-webkit-scrollbar,
:root:not(.dark) main .overflow-y-auto::-webkit-scrollbar { width: 4px; height: 4px; }
:root:not(.dark) [data-testid='chat']::-webkit-scrollbar-track,
:root:not(.dark) [data-testid='chat-container']::-webkit-scrollbar-track,
:root:not(.dark) [data-testid='chat-messages']::-webkit-scrollbar-track,
:root:not(.dark) main [data-testid='messages']::-webkit-scrollbar-track,
:root:not(.dark) main .overflow-y-auto::-webkit-scrollbar-track {
background: transparent !important; border: none !important; box-shadow: none !important;
}
:root:not(.dark) [data-testid='chat']::-webkit-scrollbar-thumb,
:root:not(.dark) [data-testid='chat-container']::-webkit-scrollbar-thumb,
:root:not(.dark) [data-testid='chat-messages']::-webkit-scrollbar-thumb,
:root:not(.dark) main [data-testid='messages']::-webkit-scrollbar-thumb,
:root:not(.dark) main .overflow-y-auto::-webkit-scrollbar-thumb {
background: #ffffff !important; border: none !important; box-shadow: none !important;
}

/* === Alteração de borda (adicionado) === */
/* ============================== CHAT INPUT: unificar fundo + bordas TEMP ============================== */

/* Aplica fundo uniforme do chat em ambos os cenários */
.relative.flex.w-full.flex-grow.flex-col.border:has(#prompt-textarea) {
background-color: var(--surface-chat) !important;
border-color: var(--border) !important;
}

/* Caso tenha classes bg-* (ex: bg-violet-950/10), força de volta ao fundo padrão */
.relative.flex.w-full.flex-grow.flex-col.border:has(#prompt-textarea)[class*="bg-"] {
background-color: var(--surface-chat) !important;
}

/* Garante que as partes internas não alterem o fundo */
.relative.flex.w-full.flex-grow.flex-col.border:has(#prompt-textarea) > .flex.flex-row,
.relative.flex.w-full.flex-grow.flex-col.border:has(#prompt-textarea) > .items-between.flex {
background-color: transparent !important;
}

/* ============================== CHAT TEMPORÁRIO (SINALIZAÇÃO) ============================== */
/* Quando o chat temporário ativa as classes violet */
.relative.flex.w-full.flex-grow.flex-col.border.border-violet-800\/60:has(#prompt-textarea) {
border: 2px dashed var(--warning) !important;    /* borda diferenciada */
background-color: var(--surface-chat) !important;
}

/* ============================== CHAT TEMPORÁRIO (visual roxo mantendo o fundo) ============================== */
.relative.flex.w-full.flex-grow.flex-col.border.border-violet-800\/60:has(#prompt-textarea) {
position: relative;
isolation: isolate; /* cria contexto de empilhamento para controlar z-index */
background-color: var(--surface-chat, inherit) !important; /* fundo original do chat (dark/light) */
border: 1px dashed rgba(168, 85, 247, 0.9) !important;     /* borda fina roxa */
border-radius: var(--radius-chat, 0.75rem) !important;     /* cantos arredondados */
overflow: hidden; /* overlay segue o raio */
}

/* Overlay roxo translúcido (~90% transp. = 10% opacidade) */
.relative.flex.w-full.flex-grow.flex-col.border.border-violet-800\/60:has(#prompt-textarea)::before {
content: "";
position: absolute;
inset: 0;
background: rgba(139, 92, 246, 0.1);
border-radius: inherit;
pointer-events: none;
z-index: 0; /* fica por baixo de tudo dentro do container */
}

/* ===== Ícones e botões: garantir que fiquem acima do overlay ===== */
.relative.flex.w-full.flex-grow.flex-col.border.border-violet-800\/60:has(#prompt-textarea)
:is(button, [role="button"], .btn, .icon-button, [data-testid*="send"], [data-testid*="attach"], [data-testid*="mic"]) {
position: relative;
z-index: 2; /* acima do overlay */
}

/* Bordas/anel dos botões (pseudo-elementos) também acima */
.relative.flex.w-full.flex-grow.flex-col.border.border-violet-800\/60:has(#prompt-textarea)
:is(button, [role="button"], .btn, .icon-button, [data-testid*="send"], [data-testid*="attach"], [data-testid*="mic"])::before,
.relative.flex.w-full.flex-grow.flex-col.border.border-violet-800\/60:has(#prompt-textarea)
:is(button, [role="button"], .btn, .icon-button, [data-testid*="send"], [data-testid*="attach"], [data-testid*="mic"])::after {
position: absolute;
inset: 0;
z-index: 3; /* borda/anel acima do overlay */
}

/* ===== Remove fundos internos que criavam faixas, mas preserva botões ===== */
.relative.flex.w-full.flex-grow.flex-col.border.border-violet-800\/60:has(#prompt-textarea)
:where([class*="bg-"]):not(:is(button, [role="button"], .btn, .icon-button, [data-testid*="send"], [data-testid*="attach"], [data-testid*="mic"])) {
background-color: transparent !important;
}

/* ==================== DARK: tabela da IA com grade simples e header +claro ==================== */
/* Escopo do seu DOM: <div class="markdown prose message-content ..."> <table> */
.dark article:has([data-message-author="assistant"]) .markdown.prose.message-content table,
.dark [data-message-author="assistant"] .markdown.prose.message-content table,
.dark .markdown.prose.message-content table {
  /* limpa tentativas anteriores */
  outline: none !important;
  box-shadow: none !important;

  /* grade simples */
  border-collapse: collapse !important;
  width: 100% !important;
  background: var(--surface-secondary) !important;
  border: 1px solid #ffffff !important;               /* contorno externo */
}

/* bordas em TODAS as células (grade interna) */
.dark .markdown.prose.message-content table :is(th, td) {
  border: 1px solid #ffffff !important;               /* linhas internas */
  padding: 0.5rem 0.75rem;                             /* legibilidade */
}

/* cabeçalho ~30% mais claro que o fundo atual da tabela */
.dark .markdown.prose.message-content table thead th {
  background: color-mix(in oklab, var(--surface-secondary) 70%, #ffffff 30%) !important;
  color: var(--text-primary) !important;
  font-weight: 700 !important;
}

/* zebra opcional leve (comenta se não quiser) */
/*
.dark .markdown.prose.message-content table tbody tr:nth-child(even) td {
  background: color-mix(in oklab, var(--surface-secondary) 90%, #ffffff 10%) !important;
}
*/

/* rolagem horizontal suave no mobile (sem afetar o layout) */
.dark .markdown.prose.message-content table {
  display: block !important;
  overflow-x: auto !important;
  max-width: 100% !important;
}
/* ==================== REMOVER BORDA DO CAMPO DE BUSCA ==================== */
.dark input[aria-label="Search messages"],
:root:not(.dark) input[aria-label="Search messages"] {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  background-color: transparent !important; /* mantém como estava */
}
/* === MOBILE FULLSCREEN (Chrome/Safari) ============================== */
html, body { margin:0 !important; padding:0 !important; }
html, body, #root, body > div[id], main { min-height: 100svh; }
#root, body > div[id], main { height: 100svh; }
@supports (-webkit-touch-callout: none) {
  html, body, #root, body > div[id], main {
    height: -webkit-fill-available; min-height: -webkit-fill-available;
  }
}
/* Body não rola; quem rola é a área de mensagens */
@media (max-width: 767px) {
  html, body { overflow: hidden !important; }
  [data-testid='chat-messages'],
  main [data-testid='messages'],
  main .overflow-y-auto {
    height: 100%; min-height: 0; overflow-y: auto !important;
    -webkit-overflow-scrolling: touch;
  }
}

/* === HEADER: 1 linha + chips roláveis ============================== */
@media (max-width: 767px) {
  .sticky.top-0, .sticky.-top-1 { display:block; }
  .sticky.top-0 .flex.items-center,
  .sticky.-top-1 .flex.items-center,
  .sticky.top-0 .flex.items-center.justify-between,
  .sticky.-top-1 .flex.items-center.justify-between {
    display:flex !important; align-items:center !important;
    flex-wrap:nowrap !important; gap:.5rem !important; min-height:48px !important;
    overflow:hidden !important;
  }
  /* grupo dos chips (seletor de modelos) */
  .sticky.top-0 .flex.items-center > .flex,
  .sticky.-top-1 .flex.items-center > .flex {
    display:flex !important; flex-wrap:nowrap !important;
    gap:.5rem !important; overflow-x:auto !important;
    -webkit-overflow-scrolling:touch; scrollbar-width:none;
  }
  .sticky.top-0 .flex.items-center > .flex::-webkit-scrollbar,
  .sticky.-top-1 .flex.items-center > .flex::-webkit-scrollbar { display:none; }
}

/* === Hambúrguer fixo em 24px (não empurra linha) =================== */
@media (max-width: 767px) {
  .sticky.top-0 button:has(.lucide-menu),
  .sticky.-top-1 button:has(.lucide-menu) {
    padding:.375rem .5rem !important; border-radius:.75rem !important;
  }
  .sticky.top-0 .lucide-menu, .sticky.-top-1 .lucide-menu {
    width:24px !important; height:24px !important; flex-shrink:0;
  }
}

/* === Seletor de modelos: MESMO TAMANHO do padrão =================== */
/* Remove o aumento anterior e herda do tema/app */
.sticky.top-0 
:is([data-testid*="model"], [id*="model"], [id*="models"], [aria-label*="model" i], [aria-label*="modelo" i])
:is(button, [role="button"], .rounded-lg, .truncate, span, label) {
  font-size: inherit !important;
  line-height: inherit !important;
  font-weight: inherit !important;
  letter-spacing: inherit !important;
  padding-top: .35rem !important;
  padding-bottom: .35rem !important;
}

/* === Ícone/Avatar do modelo: estável e do mesmo tamanho ============ */
.sticky.top-0 .rounded-full img,
.sticky.-top-1 .rounded-full img {
  width:24px !important; height:24px !important; display:block;
  object-fit: cover; border-radius:50%;
  background: var(--surface-secondary); /* fallback visual se a img não carregar */
}
@media (max-width: 767px) {
  .sticky.top-0 .rounded-full, .sticky.-top-1 .rounded-full {
    box-shadow:none !important; border:1px solid var(--border-light) !important;
  }
}
